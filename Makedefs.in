#
# "$Id$"
#
#   Common makefile definitions for OpenPrinting CUPS Filters.
#
#   Copyright 2007-2011 by Apple Inc.
#   Copyright 1997-2007 by Easy Software Products, all rights reserved.
#
#   These coded instructions, statements, and computer programs are the
#   property of Apple Inc. and are protected by Federal copyright
#   law.  Distribution and use rights are outlined in the file "LICENSE.txt"
#   which should have been included with this file.  If this file is
#   file is missing or damaged, see the license at "http://www.cups.org/".
#

#
# Programs...
#

AR		=	@AR@
AWK		=	@AWK@
CC		=	@LIBTOOL@ @CC@
CHMOD		=	@CHMOD@
DSO		=	@DSO@
INSTALL		=	@INSTALL@
LD		=	@LD@
LIBTOOL		=	@LIBTOOL@
LN		=	@LN@ -sf
MV		=	@MV@
PHPCONFIG	=	@PHPCONFIG@
RANLIB		=	@RANLIB@
RM		=	@RM@ -f
RMDIR		=	@RMDIR@
SED		=	@SED@
SHELL		=	/bin/sh

#
# Installation programs...
#

INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -c -m 555 @INSTALL_STRIP@
INSTALL_CONFIG	=	$(INSTALL) -c -m @CUPS_CONFIG_FILE_PERM@
INSTALL_DATA	=	$(INSTALL) -c -m 444
INSTALL_DIR	=	$(INSTALL) -d
INSTALL_LIB	=	$(LIBTOOL) $(INSTALL) -c -m 555 @INSTALL_STRIP@
INSTALL_SCRIPT	=	$(INSTALL) -c -m 555

#
# Libraries...
#

LIBCUPSFILTERS	=	@LIBCUPSFILTERS@
LIBJPEG		=	@LIBJPEG@
LIBPNG		=	@LIBPNG@
LIBTIFF		=	@LIBTIFF@
LIBZ		=	@LIBZ@

#
# Program options...
#
# OPTIM         Defines the common compiler optimization/debugging options
#               for all architectures.
# OPTIONS       Defines other compile-time options.
#

ALL_CFLAGS	=	-Ifontembed -I.. $(CFLAGS) @LARGEFILE@ $(OPTIONS)
ALL_CXXFLAGS    =       -Ioprs -Iopvp -I../opvp -I../.. -I.. $(CXXFLAGS) \
			@LARGEFILE@ $(OPTIONS)
ARFLAGS		=	@ARFLAGS@
BACKLIBS	=	@BACKLIBS@
CFLAGS		=	@CPPFLAGS@ @CFLAGS@
CXXFLAGS	=	@CPPFLAGS@ @CXXFLAGS@
COMMONLIBS	=	@LIBS@ $(LINKCUPS)
DSOFLAGS	=	@DSOFLAGS@
DSOLIBS		=	@DSOLIBS@ $(COMMONLIBS)
IMGLIBS		=	@IMGLIBS@
LDFLAGS		=	@LDFLAGS@ @RELROFLAGS@ @PIEFLAGS@ $(OPTIM)
LIBS		=	$(COMMONLIBS)
LCMS_LIBS	=	@LCMS_LIBS@ $(LIBS)
FONTCONFIG_LIBS	=	@FONTCONFIG_LIBS@ $(LIBS)
FREETYPE_LIBS	=	@FREETYPE_LIBS@ $(LIBS)
IJS_LIBS	=	@IJS_LIBS@ $(LIBS)
POPPLER_LIBS	=	@POPPLER_LIBS@ $(LIBS)
LINKCUPS	=	@LINKCUPS@
LINKCUPSFILTERS	=	@LINKCUPSFILTERS@
OPTIM		=	@OPTIM@
OPTIONS		=
PHPDIR		=	@PHPDIR@
PHPOPTIONS	=	@PHPOPTIONS@ -I../.. `$(PHPCONFIG) --includes`

#
# Directories...
#
# The first section uses the GNU names (which are *extremely*
# difficult to find in a makefile because they are lowercase...)
# We have to define these first because autoconf uses ${prefix}
# and ${exec_prefix} for most of the other directories...
#
# This is immediately followed by definition in ALL CAPS for the
# needed directories...
#

bindir		=	@bindir@
datadir		=	@datadir@
datarootdir	=	@datarootdir@
exec_prefix	=	@exec_prefix@
includedir	=	@includedir@
libdir		=	@libdir@
libexecdir	=	@libexecdir@
prefix		=	@prefix@
sbindir		=	@sbindir@
srcdir		=	@srcdir@
sysconfdir	=	@sysconfdir@
top_srcdir	=	@top_srcdir@

BUILDROOT	=	$(DSTROOT)
DATADIR		=	$(BUILDROOT)@CUPS_DATADIR@
FONTPATH	=	$(BUILDROOT)@CUPS_FONTPATH@
INCLUDEDIR	=	$(BUILDROOT)$(includedir)
LIBDIR		=	$(BUILDROOT)$(libdir)
SERVERBIN	= 	$(BUILDROOT)@CUPS_SERVERBIN@

#
# Rules...
#

.SILENT:
.SUFFIXES:	.a .c .cxx .h .o

.c.o:
	echo Compiling $<...
	$(CC) $(ARCHFLAGS) $(OPTIM) $(ALL_CFLAGS) -c -o $@ $<

.cxx.o:
	echo Compiling $<...
	$(CXX) $(ARCHFLAGS) $(OPTIM) $(ALL_CXXFLAGS) -c -o $@ $<

#
# End of "$Id$"
#
