#
# "$Id$"
#
#   Common makefile definitions for CUPS Legacy.
#
#   Copyright 2007-2011 by Apple Inc.
#   Copyright 1997-2007 by Easy Software Products, all rights reserved.
#
#   These coded instructions, statements, and computer programs are the
#   property of Apple Inc. and are protected by Federal copyright
#   law.  Distribution and use rights are outlined in the file "LICENSE.txt"
#   which should have been included with this file.  If this file is
#   file is missing or damaged, see the license at "http://www.cups.org/".
#

#
# Programs...
#

AR		=	@AR@
AWK		=	@AWK@
CC		=	@LIBTOOL@ @CC@
CHMOD		=	@CHMOD@
DSO		=	@DSO@
INSTALL		=	@INSTALL@
LD		=	@LD@
LIBTOOL		=	@LIBTOOL@
LN		=	@LN@ -sf
MV		=	@MV@
PHPCONFIG	=	@PHPCONFIG@
RANLIB		=	@RANLIB@
RM		=	@RM@ -f
RMDIR		=	@RMDIR@
SED		=	@SED@
SHELL		=	/bin/sh

#
# Installation programs...
#

INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -c -m 555 @INSTALL_STRIP@
INSTALL_CONFIG	=	$(INSTALL) -c -m @CUPS_CONFIG_FILE_PERM@
INSTALL_DATA	=	$(INSTALL) -c -m 444
INSTALL_DIR	=	$(INSTALL) -d
INSTALL_LIB	=	$(LIBTOOL) $(INSTALL) -c -m 555 @INSTALL_STRIP@
INSTALL_SCRIPT	=	$(INSTALL) -c -m 555

#
# Libraries...
#

LIBCUPSLEGACY	=	@LIBCUPSLEGACY@
LIBJPEG		=	@LIBJPEG@
LIBPNG		=	@LIBPNG@
LIBTIFF		=	@LIBTIFF@
LIBZ		=	@LIBZ@

#
# Program options...
#
# OPTIM         Defines the common compiler optimization/debugging options
#               for all architectures.
# OPTIONS       Defines other compile-time options.
#

ALL_CFLAGS	=	-I.. $(CFLAGS) @LARGEFILE@ $(OPTIONS)
ARFLAGS		=	@ARFLAGS@
CFLAGS		=	@CPPFLAGS@ @CFLAGS@
COMMONLIBS	=	@LIBS@ $(LINKCUPS)
DSOFLAGS	=	@DSOFLAGS@
DSOLIBS		=	@DSOLIBS@ $(COMMONLIBS)
IMGLIBS		=	@IMGLIBS@
LDFLAGS		=	@LDFLAGS@ @RELROFLAGS@ @PIEFLAGS@ $(OPTIM)
LIBS		=	$(COMMONLIBS)
LINKCUPS	=	@LINKCUPS@
LINKCUPSLEGACY	=	@LINKCUPSLEGACY@
OPTIM		=	@OPTIM@
OPTIONS		=
PHPDIR		=	@PHPDIR@
PHPOPTIONS	=	@PHPOPTIONS@ -I../.. `$(PHPCONFIG) --includes`

#
# Directories...
#
# The first section uses the GNU names (which are *extremely*
# difficult to find in a makefile because they are lowercase...)
# We have to define these first because autoconf uses ${prefix}
# and ${exec_prefix} for most of the other directories...
#
# This is immediately followed by definition in ALL CAPS for the
# needed directories...
#

bindir		=	@bindir@
datadir		=	@datadir@
datarootdir	=	@datarootdir@
exec_prefix	=	@exec_prefix@
libdir		=	@libdir@
libexecdir	=	@libexecdir@
prefix		=	@prefix@
sbindir		=	@sbindir@
srcdir		=	@srcdir@
sysconfdir	=	@sysconfdir@
top_srcdir	=	@top_srcdir@

BUILDROOT	=	$(DSTROOT)
DATADIR		=	$(BUILDROOT)@CUPS_DATADIR@
FONTPATH	=	$(BUILDROOT)@CUPS_FONTPATH@
LIBDIR		=	$(BUILDROOT)$(libdir)
SERVERBIN	= 	$(BUILDROOT)@CUPS_SERVERBIN@

#
# Rules...
#

.SILENT:
.SUFFIXES:	.a .c .h .o

.c.o:
	echo Compiling $<...
	$(CC) $(ARCHFLAGS) $(OPTIM) $(ALL_CFLAGS) -c -o $@ $<

#
# End of "$Id$"
#
